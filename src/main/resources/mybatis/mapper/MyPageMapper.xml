<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bit.house.mapper.MyPageMapper">


    <select id="selectProfile" resultType="com.bit.house.domain.MemberVO">
        SELECT nickName, memberImg, memberIntro
        FROM member
        WHERE memberId = #{memberId}
    </select>


    <update id="modifyProfile" parameterType="MemberVO">
        UPDATE member SET
        nickName = #{nickName}, memberImg = #{memberImg}, memberIntro = #{memberIntro}
        WHERE memberId = #{memberId}
    </update>

    <select id="follower" resultType="FollowVO">
        SELECT * FROM follow WHERE memberId = #{memberId}
    </select>

    <select id="following" resultType="FollowVO">
        SELECT * FROM follow WHERE followId = #{followId}
    </select>

    <insert id="follow" parameterType="FollowVO">
        INSERT INTO
        follow(memberId, followId)
        VALUES(#{memberId}, #{followId})
    </insert>

    <delete id="cancelFollow" parameterType="FollowVO">
        DELETE FROM follow WHERE followId = #{followId}
    </delete>

    <select id="myProfile" resultType="MemberVO">
        SELECT nickName, memberImg, memberIntro
        FROM member
        WHERE memberId = #{memberId}
    </select>

    <select id="ProfilePhoto" resultType="PhotoBoardVO">
        SELECT photoBoardNo, PhotoImg1
        FROM photoboard
        WHERE memberId = #{memberId}
        ORDER BY photoBoardNo desc
        LIMIT 4;
    </select>

    <select id="ProfileScrap" resultType="String">
        SELECT s.scrapNo, p.photoBoardNo, p.photoImg1
        FROM scrap s INNER JOIN photoboard p
        ON s.photoBoardNo = p.photoBoardNo
        WHERE s.memberId = #{memberId}
        ORDER BY s.scrapNo desc
        LIMIT 4;
    </select>

    <select id="allPhoto" resultType="PhotoBoardVO">
        SELECT * FROM photoboard WHERE memberId = #{memberId}
    </select>

    <select id="allScrap" resultType="ScrapVO">
        SELECT s.scrapNo, p.photoBoardNo, p.photoImg1
        FROM scrap s INNER JOIN photoboard p
        ON s.photoBoardNo = p.photoBoardNo
        WHERE s.memberId = #{memberId}
    </select>

    <select id="sendNote" resultType="MsgVO">
        SELECT msgNo, memberId, msgContents, msgDate
        FROM msg
        WHERE receiveId = #{memberId}
        ORDER BY msgNo desc
    </select>

    <select id="receiveNote" resultType="MsgVO">
        SELECT msgNo, receiveId, msgContents, msgDate
        FROM msg
        WHERE memberId = #{memberId}
        ORDER BY msgNo desc
    </select>

    <insert id="noteSending" parameterType="MsgVO">
        INSERT INTO
        msg(memberId, receiveId, msgContent, msgDate)
        VALUES(#{memberId}, #{receiveId}, #{msgContent}, #{msgDate})
    </insert>

    <delete id="deleteNote" parameterType="int">
        DELETE FROM msg WHERE msgNo = #{msgNo}
    </delete>

</mapper>